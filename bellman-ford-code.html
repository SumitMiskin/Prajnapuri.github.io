<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <title>Transmission Optimization Code Preview — Prajnapuri</title>
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
    <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" />
    <link href="css/styles.css" rel="stylesheet" />
    <style>
        body {
            background: #f3f6f9;
            color: #333;
            font-family: 'Lato', sans-serif;
            padding: 60px 20px;
        }

        .container-modal {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 8px;
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.08);
            overflow: hidden;
        }

        .modal-header {
            padding: 20px 24px;
            border-bottom: 1px solid #e1e8ed;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-weight: 700;
            font-size: 18px;
            color: #222;
        }

        .modal-subtitle {
            color: #777;
            font-size: 13px;
        }

        .top-actions {
            display: flex;
            gap: 8px;
        }

        .btn-action {
            background: #1f6feb;
            color: white;
            border: none;
            padding: 8px 14px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            font-size: 14px;
        }

        .btn-action:hover {
            background: #0d47a1;
        }

        .btn-action.btn-close-modal {
            background: #2b87c9;
        }

        .modal-body {
            padding: 24px;
        }

        .row-content {
            display: grid;
            grid-template-columns: 40% 60%;
            gap: 24px;
        }

        @media (max-width: 768px) {
            .row-content {
                grid-template-columns: 1fr;
            }
        }

        .col-left h6 {
            color: #2a6a9e;
            font-weight: 700;
            font-size: 14px;
            margin-top: 16px;
            margin-bottom: 8px;
        }

        .col-left h6:first-child {
            margin-top: 0;
        }

        .col-left p {
            color: #555;
            font-size: 14px;
            line-height: 1.6;
            margin-bottom: 12px;
        }

        .col-right h6 {
            color: #2a6a9e;
            font-weight: 700;
            font-size: 14px;
            margin-bottom: 12px;
        }

        pre.code-block {
            background: #0b1220;
            color: #cfe5ff;
            padding: 16px;
            border-radius: 6px;
            overflow: auto;
            max-height: 500px;
            font-size: 12px;
            line-height: 1.5;
        }

        .code-line {
            display: flex;
        }

        .ln {
            width: 35px;
            text-align: right;
            padding-right: 12px;
            color: #6b7a89;
            user-select: none;
            flex-shrink: 0;
        }

        .code {
            white-space: pre;
            font-family: Consolas, 'Courier New', monospace;
        }
    </style>
</head>

<body>
    <div class="container-modal">
        <div class="modal-header">
            <div>
                <div class="modal-title">Transmission Optimization — Bellman-Ford</div>
                <div class="modal-subtitle">PowerGridOptimizer.cpp — C++ (read-only)</div>
            </div>
            <div class="top-actions">
                <button class="btn-action" id="copyBtn"><i class="fas fa-copy"></i> Copy</button>
                <a href="energy-grid.html" class="btn-action btn-close-modal"><i class="fas fa-times"></i> Close</a>
            </div>
        </div>

        <div class="modal-body">
            <div class="row-content">
                <div class="col-left">
                    <h6>Problem Statement</h6>
                    <p>Power transmission involves losses over distance, but some lines may have "negative cost" due to
                        power generation or gain enhancements. We need to find the optimal path with minimum net loss
                        (or maximum gain) from a source to all substations, while also detecting any unstable loops
                        (negative weight cycles).</p>

                    <h6>Solution Approach</h6>
                    <p>The **Bellman-Ford Algorithm** is used here because, unlike Dijkstra, it can handle edges with
                        negative weights (representing power generation credit). It iteratively relaxes edges to find
                        the shortest path and can detect negative cycles, which in a power grid context would indicate
                        dangerous instabilities or mathematical anomalies in the network model.</p>
                </div>

                <div class="col-right">
                    <h6>C++ Implementation</h6>
                    <pre class="code-block" id="codeBlock"><code><div class="code-line"><span class="ln">1</span><span class="code">#include &lt;iostream&gt;</span></div>
<div class="code-line"><span class="ln">2</span><span class="code">#include &lt;vector&gt;</span></div>
<div class="code-line"><span class="ln">3</span><span class="code">#include &lt;climits&gt;</span></div>
<div class="code-line"><span class="ln">4</span><span class="code">using namespace std;</span></div>
<div class="code-line"><span class="ln">5</span><span class="code"></span></div>
<div class="code-line"><span class="ln">6</span><span class="code">struct Edge {</span></div>
<div class="code-line"><span class="ln">7</span><span class="code">    int u, v;</span></div>
<div class="code-line"><span class="ln">8</span><span class="code">    int weight; // Transmission loss (can be negative for generation credit)</span></div>
<div class="code-line"><span class="ln">9</span><span class="code">};</span></div>
<div class="code-line"><span class="ln">10</span><span class="code"></span></div>
<div class="code-line"><span class="ln">11</span><span class="code">void bellmanFord(int V, int E, vector&lt;Edge&gt;& edges, int src) {</span></div>
<div class="code-line"><span class="ln">12</span><span class="code">    vector&lt;int&gt; dist(V, INT_MAX);</span></div>
<div class="code-line"><span class="ln">13</span><span class="code">    dist[src] = 0;</span></div>
<div class="code-line"><span class="ln">14</span><span class="code"></span></div>
<div class="code-line"><span class="ln">15</span><span class="code">    // Relax all edges V-1 times</span></div>
<div class="code-line"><span class="ln">16</span><span class="code">    for (int i = 1; i &lt;= V - 1; i++) {</span></div>
<div class="code-line"><span class="ln">17</span><span class="code">        for (const Edge& edge : edges) {</span></div>
<div class="code-line"><span class="ln">18</span><span class="code">            if (dist[edge.u] != INT_MAX &amp;&amp; dist[edge.u] + edge.weight &lt; dist[edge.v]) {</span></div>
<div class="code-line"><span class="ln">19</span><span class="code">                dist[edge.v] = dist[edge.u] + edge.weight;</span></div>
<div class="code-line"><span class="ln">20</span><span class="code">            }</span></div>
<div class="code-line"><span class="ln">21</span><span class="code">        }</span></div>
<div class="code-line"><span class="ln">22</span><span class="code">    }</span></div>
<div class="code-line"><span class="ln">23</span><span class="code"></span></div>
<div class="code-line"><span class="ln">24</span><span class="code">    // Check for negative-weight cycles</span></div>
<div class="code-line"><span class="ln">25</span><span class="code">    for (const Edge& edge : edges) {</span></div>
<div class="code-line"><span class="ln">26</span><span class="code">        if (dist[edge.u] != INT_MAX &amp;&amp; dist[edge.u] + edge.weight &lt; dist[edge.v]) {</span></div>
<div class="code-line"><span class="ln">27</span><span class="code">            cout &lt;&lt; "Negative weight cycle detected! Power flow unstable.\n";</span></div>
<div class="code-line"><span class="ln">28</span><span class="code">            return;</span></div>
<div class="code-line"><span class="ln">29</span><span class="code">        }</span></div>
<div class="code-line"><span class="ln">30</span><span class="code">    }</span></div>
<div class="code-line"><span class="ln">31</span><span class="code"></span></div>
<div class="code-line"><span class="ln">32</span><span class="code">    // Output shortest (lowest-loss) path</span></div>
<div class="code-line"><span class="ln">33</span><span class="code">    cout &lt;&lt; "Optimal transmission loss from source substation " &lt;&lt; src &lt;&lt; ":\n";</span></div>
<div class="code-line"><span class="ln">34</span><span class="code">    for (int i = 0; i &lt; V; i++) {</span></div>
<div class="code-line"><span class="ln">35</span><span class="code">        cout &lt;&lt; "To substation " &lt;&lt; i &lt;&lt; " = ";</span></div>
<div class="code-line"><span class="ln">36</span><span class="code">        if (dist[i] == INT_MAX) cout &lt;&lt; "Not reachable\n";</span></div>
<div class="code-line"><span class="ln">37</span><span class="code">        else cout &lt;&lt; dist[i] &lt;&lt; " units\n";</span></div>
<div class="code-line"><span class="ln">38</span><span class="code">    }</span></div>
<div class="code-line"><span class="ln">39</span><span class="code">}</span></div>
<div class="code-line"><span class="ln">40</span><span class="code"></span></div>
<div class="code-line"><span class="ln">41</span><span class="code">int main() {</span></div>
<div class="code-line"><span class="ln">42</span><span class="code">    int V, E;</span></div>
<div class="code-line"><span class="ln">43</span><span class="code">    cout &lt;&lt; "Enter number of substations (vertices) and connections (edges): ";</span></div>
<div class="code-line"><span class="ln">44</span><span class="code">    cin &gt;&gt; V &gt;&gt; E;</span></div>
<div class="code-line"><span class="ln">45</span><span class="code"></span></div>
<div class="code-line"><span class="ln">46</span><span class="code">    vector&lt;Edge&gt; edges(E);</span></div>
<div class="code-line"><span class="ln">47</span><span class="code">    cout &lt;&lt; "Enter edges in format: source destination transmission_loss (use negative for power generation):\n";</span></div>
<div class="code-line"><span class="ln">48</span><span class="code">    for (int i = 0; i &lt; E; i++) {</span></div>
<div class="code-line"><span class="ln">49</span><span class="code">        cin &gt;&gt; edges[i].u &gt;&gt; edges[i].v &gt;&gt; edges[i].weight;</span></div>
<div class="code-line"><span class="ln">50</span><span class="code">    }</span></div>
<div class="code-line"><span class="ln">51</span><span class="code"></span></div>
<div class="code-line"><span class="ln">52</span><span class="code">    int src;</span></div>
<div class="code-line"><span class="ln">53</span><span class="code">    cout &lt;&lt; "Enter source substation index: ";</span></div>
<div class="code-line"><span class="ln">54</span><span class="code">    cin &gt;&gt; src;</span></div>
<div class="code-line"><span class="ln">55</span><span class="code"></span></div>
<div class="code-line"><span class="ln">56</span><span class="code">    bellmanFord(V, E, edges, src);</span></div>
<div class="code-line"><span class="ln">57</span><span class="code">    return 0;</span></div>
<div class="code-line"><span class="ln">58</span><span class="code">}</span></div></code></pre>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.getElementById('copyBtn').addEventListener('click', function () {
            const text = Array.from(document.querySelectorAll('#codeBlock .code')).map(n => n.textContent).join('\n');
            navigator.clipboard.writeText(text).then(() => {
                this.textContent = 'Copied!';
                setTimeout(() => this.innerHTML = '<i class="fas fa-copy"></i> Copy', 1500);
            });
        });
    </script>
</body>

</html>