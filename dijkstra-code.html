<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <title>Dijkstra Code Preview — Prajnapuri</title>
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
    <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" />
    <link href="css/styles.css" rel="stylesheet" />
    <style>
      body { background: #f3f6f9; color: #333; font-family: 'Lato', sans-serif; padding: 60px 20px; }
      .container-modal { max-width: 1000px; margin: 0 auto; background: white; border-radius: 8px; box-shadow: 0 12px 40px rgba(0,0,0,0.08); overflow: hidden; }
      .modal-header { padding: 20px 24px; border-bottom: 1px solid #e1e8ed; display: flex; justify-content: space-between; align-items: center; }
      .modal-title { font-weight: 700; font-size: 18px; color: #222; }
      .modal-subtitle { color: #777; font-size: 13px; }
      .top-actions { display: flex; gap: 8px; }
      .btn-action { background: #1f6feb; color: white; border: none; padding: 8px 14px; border-radius: 6px; cursor: pointer; font-weight: 600; text-decoration: none; display: inline-flex; align-items: center; gap: 6px; font-size: 14px; }
      .btn-action:hover { background: #0d47a1; }
      .btn-action.btn-close-modal { background: #2b87c9; }
      .modal-body { padding: 24px; }
      .row-content { display: grid; grid-template-columns: 1fr 1fr; gap: 24px; }
      @media (max-width: 768px) { .row-content { grid-template-columns: 1fr; } }
      .col-left h6 { color: #2a6a9e; font-weight: 700; font-size: 14px; margin-top: 16px; margin-bottom: 8px; }
      .col-left h6:first-child { margin-top: 0; }
      .col-left p { color: #555; font-size: 14px; line-height: 1.6; margin-bottom: 12px; }
      .col-right h6 { color: #2a6a9e; font-weight: 700; font-size: 14px; margin-bottom: 12px; }
      pre.code-block { background: #0b1220; color: #cfe5ff; padding: 16px; border-radius: 6px; overflow: auto; max-height: 500px; font-size: 12px; line-height: 1.5; }
      .code-line { display: flex; }
      .ln { width: 35px; text-align: right; padding-right: 12px; color: #6b7a89; user-select: none; flex-shrink: 0; }
      .code { white-space: pre; font-family: Consolas, 'Courier New', monospace; }
    </style>
  </head>
  <body>
    <div class="container-modal">
      <div class="modal-header">
        <div>
          <div class="modal-title">Ride-Sharing & Dynamic Dispatch — Dijkstra</div>
          <div class="modal-subtitle">Case1.cpp — C++ (read-only)</div>
        </div>
        <div class="top-actions">
          <button class="btn-action" id="copyBtn"><i class="fas fa-copy"></i> Copy</button>
          <a href="transportation.html" class="btn-action btn-close-modal"><i class="fas fa-times"></i> Close</a>
        </div>
      </div>

      <div class="modal-body">
        <div class="row-content">
          <div class="col-left">
            <h6>Problem Statement</h6>
            <p>In a city with multiple intersections and transit routes, we need to find the fastest travel time from a source location to all other destinations. Dijkstra's algorithm solves this single-source shortest path problem efficiently.</p>
            
            <h6>Solution Approach</h6>
            <p>The SmartTransportation class implements Dijkstra's algorithm to compute shortest paths. It maintains arrays for travel times, visited status, and previous nodes. The algorithm iteratively selects the unvisited node with minimum distance and updates distances to its neighbors.</p>
            <p>Key operations include initialization, finding the minimum unvisited node, and relaxing edges. The output displays the fastest routes and intermediate stops from the source to each destination.</p>
          </div>

          <div class="col-right">
            <h6>C++ Implementation</h6>
            <pre class="code-block" id="codeBlock"><code><div class="code-line"><span class="ln">1</span><span class="code">#include &lt;iostream&gt;</span></div>
              #include <iostream>
#include <algorithm>
#include <string>
using namespace std;

class SmartTransportation {
public:
    int previous[4];
    int travelTime[4];
    int visited[4];

    void initialize(int timeMatrix[4][4], int start);
    int findMinimum();
    void update(int timeMatrix[4][4]);
    void computeShortestPaths(int timeMatrix[4][4], int start);
    void displayPaths(int start, string locationNames[4]);
};

void SmartTransportation::initialize(int timeMatrix[4][4], int start) {
    for (int i = 0; i < 4; i++) {
        previous[i] = start;
        travelTime[i] = (timeMatrix[start][i] == 0) ? 10000000 : timeMatrix[start][i];
        visited[i] = 0;
    }
    visited[start] = 1;
    travelTime[start] = 0;
}

int SmartTransportation::findMinimum() {
    int minimum = 10000000;
    int minIndex = -1;
    for (int i = 0; i < 4; i++) {
        if (!visited[i] && travelTime[i] < minimum) {
            minimum = travelTime[i];
            minIndex = i;
        }
    }
    return minIndex;
}

void SmartTransportation::update(int timeMatrix[4][4]) {
    int u = findMinimum();
    if (u == -1)
        return;
    visited[u] = 1;
    for (int i = 0; i < 4; i++) {
        if (!visited[i]) {
            if (travelTime[u] + timeMatrix[u][i] < travelTime[i]) {
                travelTime[i] = travelTime[u] + timeMatrix[u][i];
                previous[i] = u;
            }
        }
    }
}

void SmartTransportation::computeShortestPaths(int timeMatrix[4][4], int start) {
    initialize(timeMatrix, start);
    for (int i = 0; i < 3; i++)
        update(timeMatrix);
}

void SmartTransportation::displayPaths(int start, string locationNames[4]) {
    for (int i = 0; i < 4; i++) {
        if (i != start) {
            cout << "Fastest route from " << locationNames[start] << " to " << locationNames[i]
                 << " takes " << travelTime[i] << " minutes via: ";
            int j = i;
            cout << locationNames[j];
            while (previous[j] != start) {
                j = previous[j];
                cout << " <- " << locationNames[j];
            }
            cout << " <- " << locationNames[start] << endl;
        }
    }
}

int main() {
    int start;
    int timeMatrix[4][4];
    string locationNames[4] = {"Central Junction", "Hospital", "City Market", "Tech Park"};

    cout << "Enter the starting location (0 - Central Junction, 1 - Hospital, 2 - City Market, 3 - Tech Park): ";
    cin >> start;

    cout << "Enter the travel time matrix (in minutes) between intersections:\n";
    for (int i = 0; i < 4; i++) {
        for (int j = 0; j < 4; j++) {
            cin >> timeMatrix[i][j];
        }
    }

    SmartTransportation trafficSystem;
    trafficSystem.computeShortestPaths(timeMatrix, start);
    trafficSystem.displayPaths(start, locationNames);

    return 0;
}

            </pre>
          </div>
        </div>
      </div>
    </div>

    <script>
      document.getElementById('copyBtn').addEventListener('click', function(){
        const text = Array.from(document.querySelectorAll('#codeBlock .code')).map(n=>n.textContent).join('\n');
        navigator.clipboard.writeText(text).then(()=>{
          this.textContent = 'Copied!';
          setTimeout(()=> this.innerHTML = '<i class="fas fa-copy"></i> Copy', 1500);
        });
      });
    </script>
  </body>
</html>
