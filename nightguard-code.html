<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="NightGuard technical spec & code examples" />
    <title>NightGuard â€” Technical Spec & Code</title>
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
    <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" />
    <link href="css/styles.css" rel="stylesheet" />
    <style>
      .content-card{ background:#fff; max-width:980px; margin:100px auto 40px; padding:28px; border-radius:12px; box-shadow:0 12px 36px rgba(0,0,0,0.12); font-family: Consolas, "Courier New", monospace; font-size:14px }
      pre{ background:#0f1720; color:#d6f3ff; padding:16px; border-radius:8px; overflow:auto }
      .spec-list{ font-family: "Times New Roman", Times, serif; font-size:16px }
    </style>
  </head>
  <body id="page-top">
    <nav class="navbar navbar-expand-lg bg-secondary text-uppercase fixed-top" id="mainNav">
      <div class="container">
        <a class="navbar-brand" href="index.html">Prajnapuri Design</a>
        <button class="navbar-toggler text-uppercase font-weight-bold bg-primary text-white rounded" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive">
          Menu <i class="fas fa-bars"></i>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item"><a class="nav-link px-lg-3" href="index.html">Home</a></li>
            <li class="nav-item"><a class="nav-link px-lg-3" href="project.html">Project</a></li>
            <li class="nav-item"><a class="nav-link px-lg-3" href="sumit.html">Sumit</a></li>
            <li class="nav-item"><a class="nav-link px-lg-3" href="shrinivas.html">Shrinivas</a></li>
            <li class="nav-item"><a class="nav-link px-lg-3" href="manjunath.html">Manjunath</a></li>
            <li class="nav-item"><a class="nav-link px-lg-3" href="samarth.html">Samarth</a></li>
          </ul>
                    <!-- Theme toggle -->
                    <div class="d-flex align-items-center ms-3">
                      <button id="themeToggle" class="btn-theme-toggle" aria-label="Toggle dark mode">ðŸŒ™</button>
                    </div>
        </div>
      </div>
    </nav>

    <header class="masthead masthead-small text-white text-center"></header>

    <section class="page-section" style="padding-top:40px; background:#d6e9f5; min-height:60vh;">
      <div class="content-card">
        <h2 style="font-family: 'Montserrat', sans-serif;">NightGuard â€” Technical Spec &amp; Example Code</h2>

        <h3 style="font-family: 'Times New Roman', serif;">Algorithms &amp; Data Structures (Examples)</h3>

        <p>The following code samples illustrate algorithms used in NightGuard routing, safety analysis and prioritization. These are illustrative C++ snippets and pseudocode used for teaching and prototyping â€” they should be adapted and hardened before production.</p>

        <h4>1. Dijkstra's Algorithm (Safest Route)</h4>
        <pre><code>#include <bits/stdc++.h>
    using namespace std;

    // Dijkstra's Algorithm to find safest route
    // Nodes -> locations
    // Edges -> roads
    // Weights -> risk level (crime, poor lighting, isolation)

    vector<int> dijkstra(int source, vector<vector<pair<int,int>>> &graph) {
      int V = graph.size();
      vector<int> distance(V, INT_MAX);

      // Min-heap priority queue (risk, node)
      priority_queue<pair<int,int>, vector<pair<int,int>>, greater<pair<int,int>>> pq;

      distance[source] = 0;
      pq.push({0, source});

      while (!pq.empty()) {
        int currentRisk = pq.top().first;
        int u = pq.top().second;
        pq.pop();

        if (currentRisk > distance[u])
          continue;

        for (auto edge : graph[u]) {
          int v = edge.first;
          int risk = edge.second;

          if (distance[u] + risk < distance[v]) {
            distance[v] = distance[u] + risk;
            pq.push({distance[v], v});
          }
        }
      }
      return distance;
    }

    int main() {
      int V = 5; // number of locations
      vector<vector<pair<int,int>>> graph(V);

      // Adding roads (u, v, risk)
      graph[0].push_back({1, 2});
      graph[0].push_back({2, 4});
      graph[1].push_back({2, 1});
      graph[1].push_back({3, 7});
      graph[2].push_back({4, 3});
      graph[3].push_back({4, 1});

      int source = 0;
      vector<int> safestRoute = dijkstra(source, graph);

      cout << "Safest risk level from source location:\n";
      for (int i = 0; i < V; i++) {
        cout << "To location " << i << " = " << safestRoute[i] << endl;
      }

      return 0;
    }
    </code></pre>

        <h4>2. Floydâ€“Warshall (All-Pairs Safest Routes)</h4>
        <pre><code>#include <bits/stdc++.h>
    using namespace std;
    #define INF 1e9

    void floydWarshall(vector<vector<int>> &dist, int V) {
      for (int k = 0; k < V; k++) {
        for (int i = 0; i < V; i++) {
          for (int j = 0; j < V; j++) {
            if (dist[i][k] < INF && dist[k][j] < INF &&
              dist[i][k] + dist[k][j] < dist[i][j]) {
              dist[i][j] = dist[i][k] + dist[k][j];
            }
          }
        }
      }
    }

    int main() {
      int V = 4;
      vector<vector<int>> dist = {
        {0,   3,   INF, 7},
        {8,   0,   2,   INF},
        {5,   INF, 0,   1},
        {2,   INF, INF, 0}
      };

      floydWarshall(dist, V);

      cout << "Safest risk levels between all pairs of locations:\n";
      for (int i = 0; i < V; i++) {
        for (int j = 0; j < V; j++) {
          if (dist[i][j] == INF)
            cout << "INF ";
          else
            cout << dist[i][j] << " ";
        }
        cout << endl;
      }

      return 0;
    }
    </code></pre>

        <h4>3. Unionâ€“Find (Disjoint Set Union) â€” Connected Safe Zones</h4>
        <pre><code>#include <bits/stdc++.h>
    using namespace std;

    class UnionFind {
      vector<int> parent, rank;

    public:
      UnionFind(int n) {
        parent.resize(n);
        rank.resize(n, 0);
        for (int i = 0; i < n; i++) parent[i] = i;
      }
      int findSet(int x) {
        if (parent[x] != x)
          parent[x] = findSet(parent[x]);
        return parent[x];
      }
      void unionSet(int a, int b) {
        int rootA = findSet(a);
        int rootB = findSet(b);
        if (rootA != rootB) {
          if (rank[rootA] < rank[rootB]) parent[rootA] = rootB;
          else if (rank[rootA] > rank[rootB]) parent[rootB] = rootA;
          else { parent[rootB] = rootA; rank[rootA]++; }
        }
      }
    };

    int main() {
      int locations = 6;
      UnionFind uf(locations);
      uf.unionSet(0,1); uf.unionSet(1,2); uf.unionSet(3,4);
      if (uf.findSet(0) == uf.findSet(2)) cout << "Location 0 and 2 are in the same safe zone\n";
      if (uf.findSet(2) == uf.findSet(4)) cout << "Location 2 and 4 are in the same safe zone\n";
      return 0;
    }
    </code></pre>

        <h4>4. Quick Sort (Prioritization)</h4>
        <pre><code>#include <bits/stdc++.h>
    using namespace std;

    int partition(vector<int>& priority, int low, int high) {
      int pivot = priority[high];
      int i = low - 1;
      for (int j = low; j < high; j++) {
        if (priority[j] <= pivot) { i++; swap(priority[i], priority[j]); }
      }
      swap(priority[i + 1], priority[high]);
      return i + 1;
    }
    void quickSort(vector<int>& priority, int low, int high) {
      if (low < high) {
        int pi = partition(priority, low, high);
        quickSort(priority, low, pi - 1);
        quickSort(priority, pi + 1, high);
      }
    }
    int main() {
      vector<int> rideRequests = {15, 3, 10, 7, 1, 12};
      quickSort(rideRequests, 0, rideRequests.size() - 1);
      for (int p : rideRequests) cout << p << " ";
      return 0;
    }
    </code></pre>

        <h4>5. Priority Queue / Heap (Emergency Requests)</h4>
        <pre><code>#include <bits/stdc++.h>
    using namespace std;
    int main() {
      priority_queue<int> emergencyRequests;
      emergencyRequests.push(5); emergencyRequests.push(20); emergencyRequests.push(10); emergencyRequests.push(30);
      while (!emergencyRequests.empty()) {
        cout << "Serving request with priority: " << emergencyRequests.top() << endl;
        emergencyRequests.pop();
      }
      return 0;
    }
    </code></pre>

        <h4>6. Segment Tree (Range Crime Density)</h4>
        <pre><code>#include <bits/stdc++.h>
    using namespace std;

    class SegmentTree {
      vector<int> tree; int n;
    public:
      SegmentTree(vector<int>& safetyData) { n = safetyData.size(); tree.resize(4*n); build(safetyData,0,0,n-1); }
      void build(vector<int>& arr, int node, int start, int end) {
        if (start == end) tree[node] = arr[start];
        else {
          int mid = (start+end)/2; build(arr,2*node+1,start,mid); build(arr,2*node+2,mid+1,end);
          tree[node] = tree[2*node+1] + tree[2*node+2];
        }
      }
      int query(int node,int start,int end,int l,int r) {
        if (r < start || l > end) return 0;
        if (l <= start && end <= r) return tree[node];
        int mid=(start+end)/2;
        return query(2*node+1,start,mid,l,r)+query(2*node+2,mid+1,end,l,r);
      }
      int rangeQuery(int l,int r){ return query(0,0,n-1,l,r); }
    };

    int main(){ vector<int> crimeRisk = {3,5,2,6,4,1}; SegmentTree st(crimeRisk);
      cout<<"Crime risk between location 1 and 4: "<<st.rangeQuery(1,4)<<endl;
      cout<<"Crime risk between location 2 and 5: "<<st.rangeQuery(2,5)<<endl; return 0; }
    </code></pre>

        <h4>7. Fenwick Tree (Real-Time Incident Tracking)</h4>
        <pre><code>#include <bits/stdc++.h>
    using namespace std;

    class FenwickTree { vector<int> BIT; int n; public: FenwickTree(int size){ n=size; BIT.assign(n+1,0);} 
      void update(int i,int value){ while(i<=n){ BIT[i]+=value; i+=i&(-i);} }
      int query(int i){ int sum=0; while(i>0){ sum+=BIT[i]; i-=i&(-i);} return sum; }
      int rangeQuery(int l,int r){ return query(r)-query(l-1); }
    };

    int main(){ int locations=6; FenwickTree ft(locations); ft.update(1,2); ft.update(3,1); ft.update(5,3);
      cout<<"Incidents between location 1 and 4: "<<ft.rangeQuery(1,4)<<endl;
      cout<<"Incidents between location 2 and 6: "<<ft.rangeQuery(2,6)<<endl; return 0; }
    </code></pre>

        <h4>8. Trie &amp; KMP (Text search and pattern detection)</h4>
        <pre><code>// Trie: used for autocomplete (not fully expanded here)
    // KMP: used for pattern detection in reports

    #include <bits/stdc++.h>
    using namespace std;

    vector<int> computeLPS(string pattern) {
      int m = pattern.length(); vector<int> lps(m,0);
      for (int i =1,len=0;i<m;i++){
        while(len>0 && pattern[i]!=pattern[len]) len = lps[len-1];
        if (pattern[i]==pattern[len]) len++; lps[i]=len;
      }
      return lps;
    }

    void KMPSearch(string text,string pattern){ int n=text.length(), m=pattern.length(); vector<int> lps=computeLPS(pattern); int i=0,j=0;
      while(i<n){ if(text[i]==pattern[j]){ i++; j++; } if(j==m){ cout<<"Pattern found at index "<<i-j<<endl; j=lps[j-1]; }
        else if(i<n && text[i]!=pattern[j]){ if(j!=0) j=lps[j-1]; else i++; }
      }
    }

    int main(){ string feedback = "poor lighting reported near station. poor lighting and no cctv observed."; string pattern = "poor lighting"; KMPSearch(feedback, pattern); return 0; }
    </code></pre>

        <h3 style="font-family: 'Times New Roman', serif;">Deployment notes</h3>
        <ul class="spec-list">
          <li>Secure endpoints (mutual TLS / OAuth2) for city security integration.</li>
          <li>Minimize stored location history; apply privacy-preserving defaults.</li>
          <li>Use pilots to tune risk weights and thresholding for alerts.</li>
          <li>Production systems should be implemented in robust server languages (Go/Java/Node) with monitored queues and retries.</li>
        </ul>

        <div style="margin-top:18px; display:flex; gap:12px; flex-wrap:wrap">
          <a class="btn btn-primary" href="night-time-safe-travel-services.html">Back to NightGuard</a>
          <a class="btn btn-outline-secondary" href="shrinivas.html">Back to ideas</a>
        </div>
      </div>
    </section>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/scripts.js"></script>
  </body>
</html>
